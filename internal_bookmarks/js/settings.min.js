/**
* ownCloud - Internal Bookmarks plugin
*
* @author Xavier Beurois
* @copyright 2012 Xavier Beurois www.djazz-lab.net
* 
* This library is free software; you can redistribute it and/or
* modify it under the terms of the GNU AFFERO GENERAL PUBLIC LICENSE
* License as published by the Free Software Foundation; either 
* version 3 of the License, or any later version.
* 
* This library is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU AFFERO GENERAL PUBLIC LICENSE for more details.
*  
* You should have received a copy of the GNU Lesser General Public 
* License along with this library.  If not, see <http://www.gnu.org/licenses/>.
* 
* Minified with http://fmarcia.info/jsmin/test.html
* 
*/

$(document).ready(function(){
	$('#intbks_sortable').sortable({placeholder:'ui-state-highlight'});
	$('#intbks_sortable').disableSelection();
	$('#saveintbks').bind('click', function(){
		var t = new Array();
		
		$('#intbks_sortable').find('li').each(function(k,v){
			t.push($(this).attr('rel'));
		});
		
		$.ajax({
			type:'POST',
			url:OC.linkTo('internal_bookmarks','ajax/order.php'),
			dataType:'json',
			data:{o:t},
			async:false,
			error:function(e){
				alert(e.responseText);
			},
			success:function(k){
				document.location.reload();
			}
		});
	})
});